Domains: # "домены" данных
  # Идентификаторы
  Суррогатный ключ:
    type: bigint
    nulls: false # по возможности предлагаю использовать утвердительную, а не отрицательную
    # логику
  Главная последовательность:
    type: bigint
    nulls: false
    default: nextval('public.main_seq')
  Последовательность:
    type: bigserial
  Глобальный идентификатор:
    type: uuid
    nulls: false

  # Строковые данные
  Строка короткая:
    type: character varying(41)
    nulls: true  # Давай по умолчанию допускать null, но разрешать явное указывать разрешение Null
  Строка длинная: # TODO переименовать
    type: character varying(401)
    nulls: false # так как задано значение по умолчанию. Но это не общее правило.
    default: '''''::character varying'  # Довольно сложная конструкция для задания значения по 
    # умолчанию. Нет идея как упростить? Типизацию postgres скорее всего придется оставить, а 
    # вот как бы поработать над конструкцией '''''
  Текстовое описание:
    type: character varying(4001)
    nulls: true
  Хеш:
    type: character varying(4097)
    nulls: true
  Бинарные данные:
    type: bytea
    nulls: true

  # Даты
  Дата (опциональная):
    type: date
    nulls: true
  Дата (обязательная):
    type: date
    nulls: false

  # Штампы времени
  Момент создания объекта:
    type: timestamp with time zone
    # YML писать обращение к функции? Вижу что выше type cast ты взял в кавычки
    nulls: false
    default: now() # В Postgres нет функции CURRENT_TIMESTAMP. Правильно ли будет так в
  Момент (опциональный):
    type: timestamp with time zone
    nulls: true
  Момент (обязательный):
    type: timestamp with time zone
    nulls: false
  Срок действия объекта:
    type: timestamp with time zone
    nulls: false
    default: '''infinity''::timestamp with time zone'
  
  # Числовые показатели
  Счетчик:
    type: integer
    nulls: false
    default: '2' # вопрос, можно ли числовые значения по умолчанию писать без кавычек? Как 
    # пожелание, не первоочередная задача
  Счетчик 0:
    type: integer
    nulls: false
    default: 0
  Вещественное число:
    type: double precision
  Целое обязательное:
    type: integer
    nulls: false

  # Признаки
  Флаг (обязательный):
    default: 'false'
    nulls: false
    type: boolean

Aliases: # Секция логических псевдонимов

  Schemas: # Логические псевдонимы для схем БД
    Схема ЕИМ : eim
    Таблица энергетики : table_energy

  Entities: # Логические псевдонимы для названий таблиц (сущностей)
    Аудит действий администратора : admin_audit
    Аудит действий пользователя : user_audit
    Вид перевозки : delivery_tp
    Глобальная настройка : setting
    График загрузки : scenario_opcost_schedule
    График инвестиций мероприятия : arrangement_schedule
    График сгенерированного мероприятия : scenario_event_schedule
    Группа груза : cargo_tp
    Данные о загрузке дорог : scenario_aggr_road
    Данные о загрузке участков : scenario_aggr_road_span
    Детализация ребра : edge_detail
    Доступ к сценарию : scenario_acl
    Железная дорога : railroad
    Железнодорожная станция : station
    Журнал миграции : migration_log
    Зависящие затраты : scenario_opcost
    Земельный налог : land_tax
    Значение индекса : idx_value
    Инвестиции в разрезе по источникам финансирования : scenario_res_pivot_invest
    Инвестиционный проект : investment_project
    Интеграционный процесс : integration_process
    История миграций : migration_log
    Классификация : classification
    Корреспонденция проблемного участка : scenario_bottleneck_correspondence
    Макроэкономический сценарий : macro_scenario
    Мероприятие : arrangement
    Налог на имущество : property_tax
    Налог на прибыль : income_tax
    Налоговый режим : tax
    НДС : vat
    Отсутствие на рабочем месте : account_ooo
    Параметр системы : global_option
    Пользователь : account
    Признак включения мероприятия в программу : scenario_arrangement_include
    Проблемный участок : scenario_bottleneck
    Расчет сценария : scenario_calculation
    Роль : role
    Роль пользователя : account_role
    Сводные доходы и расходы : scenario_res_pnl
    Сводные показатели : scenario_res
    Сводные финансовые показатели : scenario_res_pivot
    Сводный рейтинг : raiting_aggr
    Связь классификаций : classification_to_classification
    Сгенерированное мероприятие : scenario_event
    Сессия : user_session
    Скрипт миграции : migration_script
    Событие пользователя : user_event
    Совещание : counsil
    Состав сгенерированного мероприятия : scenario_event_info
    Справочник : dimension
    Станция : station
    Статус учетной записи : account_status
    Субъект РФ : region
    Сценарий ЕИМ : scenario
    Сценарий обновления : migration_script
    Сценарий погрузки : scenario
    Тариф : scenario_tariff
    Уровень организации проекта : project_struct
    Участок сети : edge
    Учетная запись : account
    Финансирование проекта : investment_project_fund
    Эквалайзеры - Зависящие затраты : scenario_eq_cost
    Эквалайзеры - Тарифы : scenario_eq_tariff
    Федеральный проект: federal_project
    Паспортный участок реализации комплексного проекта : passport_nps_segment
    Объект инвестиций : investment_object

  Attributes: # Логические псевдонимы для названий атрибутов.
    CAPEX на инвестиционные проекты за период : evol_capex_amt
    CAPEX на капитальный ремонт за период : renov_capex_amt
    DPP : dpp
    IRR : irr
    MIME-тип : MIME_type
    NPV на окончание горизонта для собственного капитала : npv_own_amt
    NPV на окончание горизонта для территориального бюджета : npv_region_amt
    NPV на окончание горизонта для федерального бюджета : npv_fed_amt
    SPP : spp
    UserAgent : user_agent
    Администратор : admin_id
    Адрес IP : ip_address
    Адрес электронной почты : email
    Алгоритм хэша : pwd_hash_alg_id
    Валовые доходы : income_amt
    Валовые расходы : cost_amt
    Введенное пользователем название учетной записи : supplied_user_name
    Ведомая система : slave_system_id
    Версии литера : version_letter
    Версии номер : version_num
    Версия базы до обновления : dbver_before
    Версия базы после обновления : dbver_after
    Верхняя граница корректировки абсолютная : upper_limit_abs
    Верхняя граница корректировки относительная : upper_limit_rel
    Вид источника финансирования : funding_tp_id
    Вид перевозки : delivery_tp_id
    Время начала интеграционного процесса : process_start_ts
    Время окончания интеграционного процесса : process_end_ts
    Глобальный параметр : parameter_id
    Год : year
    Год начала горизонта : year_from
    Год начала реализации : start_year
    Год окончания горизонта : year_to
    Год финансирования : year
    Граф сети : graph_id
    Группа груза : cargo_tp_id
    Дальность : distance
    Данные о загрузке дорог : scenario_aggr_road_id
    Данные о загрузке участков : scenario_aggr_road_span_id
    Дата закрытия : end_ts
    Дата начала недоступности : ooo_begin_dt
    Дата обновления : update_ts
    Дата окончания недоступности : ooo_end_dt
    Дата рождения : birth_dt
    Дата создания : create_ts
    Дисконтированный денежный поток для компании (FCFF) : fcff_amt
    Дисконтированный денежный поток для собственников (FCFE) : fcfe_amt
    Длительность реализации : duration
    Длительность сессии в мин : duration
    Долгота : lon
    Должность : position_id
    Доля налога, подлежащего уплате в федеральный бюджет : fed_share
    Доходы : income_amt
    Единица измерения мероприятий : measure_tp_id
    Железная дорога : railroad_id
    Журнал выполнения : execution_log
    Завершенные этапы расчета : calc_phase_done_lst
    Зависящие затраты : scenario_opcost_id
    Заместитель : deputy_id
    Значение : val
    Значение булево : boolean_val
    Значение вещественное : natural_val
    Значение времени : time_val
    Значение с плавающей точкой : float_val
    Значение строковое : str_val
    Значение текстовое : text_val
    Идентификатор системы-источника : src_stm_id
    Изменяемая учетная запись : user_id
    Имя : first_nm
    Имя выгруженного файла : file_nm
    Имя игрока : natural_name
    Инвестиции : investment_amt
    Инвестиции в разрезе по источникам финансирования : scenario_res_pivot_invest_id
    Инвестиции на инвестиционные проекты : evol_capex_amt
    Инвестиции на ремонт : renov_capex_amt
    Инвестиционный проект : investment_project_id
    Интеграционный процесс : process_id
    Источник : source_id
    Исходная провозная способность : capacity
    Код : code
    Код ID : code
    Код ЕСР : code
    Код сценария грузовой базы : cargo_scenario_id
    Код транзакции : transaction_id
    Код ЦНСИ : code_cnsi
    Количество мероприятий : quantity
    Координата X : x
    Координата Y : y
    Корреспонденция проблемного участка : scenario_bottleneck_correspondence_id
    Коэффициент учета при расчете налога на имущество от инвестиций в реновацию : accounting_rate
    Логин администратора : admin_login
    Логин учетной записи : user_login
    Льготная ставка кредита : priviledge_loan_rate
    Льготный срок кредита : priviledge_duration
    Макроэкономический сценарий : macro_scenario_id
    Мероприятие : arrangement_id
    Момент (опциональный) : update_ts
    Момент блокировки учетной записи : account_lock_ts
    Момент входа : login_ts
    Момент завершения сессии : session_end_ts
    Момент создания объекта : create_ts
    Название : name
    Название инвестиционного проекта : name
    Название источника финансирования : name
    Название мероприятия : name
    Название параметра : option_id
    Название проектной иерархии : name
    Название скрипта SQL : script_name
    Название справочника : name
    Название сценария : name
    Название сценария миграции : script_name
    Название участка : name
    Название учетной записи пользователя : name
    Назначение инвестиционного проекта : purpose_tp_id
    Налоговые отчисления - выплаты по НДС : tax_vat_amt
    Налоговые отчисления - земельный налог : tax_land_amt
    Налоговые отчисления - ИТОГО : tax_amt
    Налоговые отчисления - налог на имущество : tax_property_amt
    Налоговые отчисления - налог на прибыль : tax_income_amt
    Налоговый режим : tax_id
    Недовывоз в млн т : delivery_gap
    Недовывоз в руб : delivery_gap_rub
    Номер заявки из АС ОЗ : access_memorandum_no
    Обновивший пользователь : update_user_id
    Объект : object_id
    Объем перевозок : delivery
    Описание : description
    Описание инвестиционного проекта : description
    Описание операции : opr_dsc
    Описание сценария : description
    Основная ставка : loan_rate
    Отпечаток пароля : hashed_password
    Отчество : middle_nm
    Перечень выбранных натуральных показателей : indicators_nat_lst
    Перечень выбранных финансовых показателей : indicators_fin_lst
    Период оплаты земельного налога : payment_period
    Период оплаты налога на имущество : payment_period
    Период оплаты налога на прибыль : payment_period
    Период оплаты НДС : payment_period
    Повышающий коэффициент при расчете налога на имущество от инвестиций в реновацию : renov_growth_rate
    Подразделение администратора : admin_dept_nm
    Подразделение пользователя : user_dept_nm
    Позиция : order
    Полигон : polygon_id
    Пользователь : account_id
    Понижающий коэффициент при расчете налога на имущество в развитие : evol_reduction_rate
    Последняя сессия : last_net_session_id
    Предыдущая версия БД : dbver_before
    Прибыль до налога и процентов (EBIT) : ebit_amt
    Прибыль до налога, процентов и амортизации (EIBTDA) : ebitda_amt
    Признак блокировки : blocked_ind
    Признак вхождения : include_ind
    Признак использования индекса потребительских цен : inflation_user_ind
    Признак крупной сети : hl_net_ind
    Признак ликвидации узкхих мест : bottleneck_liquidation_ind
    Признак наличия данных по объемам остальных грузоперевозок : other_flow_ind
    Признак наличия данных по объемам остальных грузоперевозок в разрезе субъектов РФ : other_transp_ind
    Признак пропуска корректировки ЕИМ : no_eim_correction_ind
    Признак прочтения : read_ind
    Признак сгенерированного мероприятия : generated_ind
    Признак успешного входа : login_success_ind
    Признак успешного выполнения : success_ind
    Признак успешного завершения : success_ind
    Приоритет : rank
    Приростные доходы : income_growth_amt
    Приростные расходы : cost_growth_amt
    Проблемный участок : scenario_bottleneck_id
    Протяженность участка : len
    Размер файла в кб : file_sz
    Ранг : rank
    Ранг связи : rank
    Расходы : cost_amt
    Регион : region_id
    Регион начала участка : region_from_id
    Регион окончания участка : region_to_id
    Результат : outcome
    Результат интеграционного процесса : process_result_id
    Родительский инвестиционный проект : parent_investment_project_id
    Родительский объект : parent_id
    Родительский сценарий : parent_id
    Родительский уровень организации проекта : parent_project_struct_id
    Родительский участок сети : parent_edge_id
    Роль : role_id
    Сводные доходы и расходы : scenario_res_pnl_id
    Сводные показатели : scenario_res_id
    Сводные финансовые показатели : scenario_res_pivot_id
    Сгенерированное мероприятие : scenario_event_id
    Сессия : user_session_id
    Сессия изменения : user_session_id
    Система-инициатор : master_system_id
    Скрипт миграции : migration_script_id
    Совещание : counsil_id
    Создавший пользователь : create_user_id
    Сообщение о результате интеграции : process_msg
    Состав сгенерированного мероприятия : scenario_event_info_id
    Сотрудник : account_id
    Способ погашения суммы основного долга : repayment_tp_id
    Справочник : dimension_id
    Среднегодовые валовые доходы : income_amt
    Среднегодовые валовые расходы : cost_amt
    Средний недовывоз в руб : delivery_gap_amt
    Средний недовывоз в т : delivery_gap
    Срок действия : expire_plan_dt
    Срок действия роли: expire_role_dt
    Срок действия объекта : end_ts
    Срок кредита : loan_period
    Ссылка на страницу события : url
    Ставка налога в млн руб. на тыс. кв. м. : tax_rate
    Ставка налога на имущество от инвестиций в развитие : evol_investment_tax_rate
    Ставка налога на имущество от инвестиций в реновацию : renov_investment_tax_rate
    Ставка налога на прибыль : tax_rate
    Ставка НДС начисляемого от прироста доходов : income_growth_tax_rate
    Ставка НДС уплачиваемого от прироста зависящих затрат : opr_cost_growth_tax_rate
    Ставка НДС уплачиваемого при осуществлении инвестиций : investment_tax_rate
    Ставка НДС уплачиваемого при условно-постоянных затратах : maintenance_tax_rate
    Стадия проекта : phase_tp_id
    Станция начала участка : station_from_id
    Станция окончания участка : station_to_id
    Статус вне офиса : ooo_status_id
    Статус вычисления : calculation_status_id
    Статус учетной записи : status_id
    Стоимость реализации : cost_amt
    Строка подключения к базе : connection_string
    Строка подключения к БД : connection_string
    Строковое значение : str_val
    Структура выгруженных данных : data_dsc
    Структурное подразделение : department_id
    Субъект : subject_id
    Сумма в руб : investment_amt
    Суммарная загрузка участка : total_flow
    Суррогатный ключ : id
    Сценарий : script
    Сценарий ЕИМ : scenario_id
    Сценарий миграции : script
    Сценарий обновления : migration_script_id
    Текст вопроса : body
    Текст оповещения : description
    Текст скрипта : migration_script
    Текущий статус вычисления : calculation_status_id
    Текущий тег : tag_cd
    Текущий этап расчета : calc_phase_current_id
    Телефон : phone
    Тип активов : asset_tp_id
    Тип включения в инвестиционную программу : ip_inclusion_tp_id
    Тип вычисления : calculation_tp_id
    Тип индекса : idx_tp_id
    Тип массива данных : slice_tp_id
    Тип мероприятия : arrangement_tp_id
    Тип объекта : object_tp_id
    Тип подключения : connection_tp_id
    Тип последнего вычисления : calculation_tp_id
    Тип связи : relation_tp_id
    Тип события пользователя : user_event_tp_id
    Тип формы ТЭ: te_form_tp_id
    Токен JWT : jwt_token
    Удовлетворение спроса в % : delivery_rate
    Укрупненная группа груза : cargo_hl_tp_id
    Уровень доступа : access_tp_id
    Уровень организации проекта : project_struct_id
    Условно-постоянные затраты : operational_cost_amt
    Участок : passport_nps_edge_id
    Участок сети : edge_id
    Файл : stream
    Фамилия : last_nm
    Федеральный проект : federal_project_id
    Финансирование проекта : investment_project_fund_id
    ФИО Администратора : admin_nm
    ФИО Пользователя : user_nm
    ФИО пользователя создаваемой учетной записи : user_nm
    Функциональная принадлежность инвестиционного проекта : prj_func_tp_id
    Функциональный заказчик : func_cst_id
    Хеш пароля : pwd_hash
    Хэш пароля : pwd_hash
    Целевая версия БД : dbver_after
    Целевой тэг : tag_tgt_cd
    Целочисленное значение : int_val
    Цель инвестистиционного проекта : goal_tp_id
    Число попыток неудачного входа : failed_login_cnt
    Число узких мест на окончание горизонта : bottleneck_cnt
    Чистая прибыль (убыток) : pure_income_amt
    Чистый денежный поток для полных инвестиционных затрат : fcf_amt
    Чистый денежный поток для собственного капитала : fcf_own_amt
    Широта : lat
    Эквалайзер 101% : factor
    # trans_energy (для остальных атрибутов есть синонимы выше):
    Дата отчета: report_date
    Организация: organisation_id
    Тип подвижного состава: rolling_stock_tp_id
    Удельная стоимость: unit_cost
    Форма: form_id

Templates: # Давай в предварительную обработку включим темплейты таблиц. 
# Таблицы будут создаваться на основе темплейтов с базовым составом полей
  Объект:
    schema: Схема ЕИМ # Хотелось бы схему указывать в шаблоне с опциональной
    # возможностью перегрузки в ходе наследования (в дочернем шаблоне или 
    # в использующей шаблон таблице)
    columns:
      Суррогатный ключ: Суррогатный ключ # Вообще все объекты предлагаю наследовать
      # от объекта, в котором определен суррогатный ключ. В нашей модели 
      # данных отдельно создаётся главный сиквенс
      Момент создания объекта: Момент создания объекта
      Момент (опциональный): Момент (опциональный)
      Срок действия объекта: Срок действия объекта
    primary_key:
      - Суррогатный ключ

  Объект с автоинкреметным ключом:
    schema: Схема ЕИМ # Хотелось бы схему указывать в шаблоне с опциональной
    # возможностью перегрузки в ходе наследования (в дочернем шаблоне или 
    # в использующей шаблон таблице)
    columns:
      Суррогатный ключ: Главная последовательность
      Момент создания объекта: Момент создания объекта
      Момент (опциональный): Момент (опциональный)
      Срок действия объекта: Срок действия объекта
    primary_key:
      - Суррогатный ключ

  Аудируемый объект:
    base:  Объект # Наследует свой атрибутный состав от объекта
    columns: # Хотелось бы иметь возможность пропускать эту секцию если она пустая
    refs: # Предлагаю не дублировать Foreing Keys в атрибутах и 
       # Существенно, что некоторые объекты, на которые мы ссылаемся в в 
       # блоке Templates, не существуют на момент создания модели данных
      Создавший пользователь: Учетная запись.Суррогатный ключ [nulls]
      Обновивший пользователь: Учетная запись.Суррогатный ключ [nulls] # По возможности
      # предлагаю заскриптовать названия FK, наппример ТаблицаОткуда_НазвАтр_ТаблицаКуда.
      # Также нужно предусмотреть задание значений внешних ключей по умолчанию

Tables: # Логические описания таблиц
  
  dimensions: # Справочники
    Классификация:
      base: Аудируемый объект
      schema: Схема ЕИМ
      columns:
        Код: Строка длинная
        Название: Строка длинная
        Описание: Текстовое описание
        Ранг: Счетчик
      refs:
        Справочник: Справочник.Суррогатный ключ 
        Родительский объект: Классификация.Суррогатный ключ [nulls]
        Тип объекта: Справочник.Суррогатный ключ [nulls]

    Справочник:
      base: Аудируемый объект
      schema: Схема ЕИМ
      columns:
        Код: Строка длинная
        Название: Строка длинная
        Описание: Текстовое описание

  migration: # Бизнес-область "Функционал миграций БД"
    Журнал миграции:
      base: Объект с автоинкреметным ключом
      columns:
        Суррогатный ключ: Главная последовательность
        Строка подключения к БД: Строка длинная
        Предыдущая версия БД: Счетчик
        Целевая версия БД: Счетчик
        Название сценария миграции: Строка длинная
        Журнал выполнения: Бинарные данные
        Признак успешного завершения: Флаг (обязательный)
        Сценарий : Бинарные данные
      refs:
        Скрипт миграции: Скрипт миграции.Суррогатный ключ

    Скрипт миграции:
      base: Объект
      columns:
        Предыдущая версия БД: Счетчик
        Целевая версия БД: Счетчик
        Сценарий миграции: Бинарные данные
        Название скрипта SQL: Строка длинная

  admin:
    Учетная запись:
      base: Аудируемый объект
      columns:
        Название учетной записи пользователя: Строка короткая
        Фамилия: Строка короткая
        Имя: Строка короткая
        Отчество: Строка короткая
        Адрес электронной почты: Строка короткая
        Дата рождения: Дата (опциональная)
        Телефон: Строка короткая
        Хеш пароля: Хеш
        Срок действия: Дата (обязательная)
        Число попыток неудачного входа: Счетчик 0
        Момент блокировки учетной записи: Момент (опциональный)
      refs:
        Алгоритм хэша: Классификация.Суррогатный ключ
        Статус учетной записи: Классификация.Суррогатный ключ
        Структурное подразделение: Классификация.Суррогатный ключ
        Должность: Классификация.Суррогатный ключ [default 737]

    Роль пользователя:
      base: Аудируемый объект
      columns:
        Срок действия роли: Дата (опциональная)
      refs:
        Роль: Классификация.Суррогатный ключ
        Пользователь: Учетная запись.Суррогатный ключ

    Статус учетной записи:
      base: Аудируемый объект
      refs:
        Статус учетной записи: Классификация.Суррогатный ключ
        Пользователь: Учетная запись.Суррогатный ключ

  trans_energy:
    te_version:
      base: Аудируемый объект
      refs:
        Форма: Классификация.Суррогатный ключ

    te_values:
      schema: Схема ЕИМ
      columns:
        Суррогатный ключ: Главная последовательность
        Год: Целое обязательное
        Значение: Вещественное число
      refs:
        version_id: te_version.Суррогатный ключ
        Организация: Классификация.Суррогатный ключ
        Тип объекта: Классификация.Суррогатный ключ
        Тип подвижного состава: Классификация.Суррогатный ключ [nulls]
        Тип мероприятия: Классификация.Суррогатный ключ [nulls]
        Единица измерения мероприятий: Классификация.Суррогатный ключ
        Тип формы ТЭ: Классификация.Суррогатный ключ
      primary_key:
        - Суррогатный ключ